jQuery(document).ready(function(){!function(t,e,a){null==e.mm&&(e.mm={});var n="mediamodifier_pod_for_woocommerce",o=t('<div class="loader_slh">loading</div>').appendTo("body");e.mm.product={unlink_template:function(i,m){return i&&i.preventDefault(),e.confirm(mm.config.msg.unlink_template_confirmation)&&(o.fadeIn("slow"),jQuery.ajax({url:"/wp-json/"+n+"/unlink",method:"POST",data:JSON.stringify({id:m}),crossDomain:!1,contentType:"application/json",success:function(a){o.fadeOut("slow");let n=t("<a/>").attr("href","javascript:mm.product.add_template(event, "+m+")").html(e.mm.config.msg.add_pod_template);t("#post-"+m+" .pod_templ_unlink").remove(),t("#post-"+m+" .pod_templ_editing > a").replaceWith(n),t("#post-"+m+" .column-pod_template_id").html("-")},error:function(t){o.fadeOut("slow"),a.log(t)}})),!1},set_template:function(i,m){i&&i.preventDefault();let p=e.prompt(mm.config.msg.set_template_prompt,"");p&&(o.fadeIn("slow"),jQuery.ajax({url:"/wp-json/"+n+"/settemplate",method:"POST",data:JSON.stringify({id:m,template_id:p}),crossDomain:!1,contentType:"application/json",success:function(a){o.fadeOut("slow");let n=t("<a/>").attr("href","javascript:mm.product.edit_template(event, "+m+', "'+p+'")').html(p),i=t("<a/>").attr("href","javascript:mm.product.edit_template(event, "+m+', "'+p+'")').html(e.mm.config.msg.edit_pod_template),l=t("<a/>").attr("href","javascript:mm.product.unlink_template(event, "+m+")").html(e.mm.config.msg.unlink_template_id+" | ").addClass("pod_templ_unlink");t("#post-"+m+" .pod_templ_editing > a").replaceWith(i).after(l),t("#post-"+m+" .pod_templ_unlink").length>0?t("#post-"+m+" .pod_templ_editing > 0").replaceWith(l):t("#post-"+m+" .pod_templ_editing").after(l),t("#post-"+m+" .column-pod_template_id").html(n)},error:function(t){o.fadeOut("slow"),a.log(t)}}))},edit_template:function(t,a,n){t&&t.preventDefault(),MM_POD_Editor.init({adminMode:!0,templateId:n,defaultContainer:e.mm.config.container,apiKey:e.mm.config.api,domain:e.mm.config.domain,successCallback:function(t){o.fadeOut("slow")},failCallback:function(t){o.fadeOut("slow"),alert("error happens")}})},add_template:function(i,m){i&&i.preventDefault(),o.fadeIn("slow");t(this);t.ajax({url:"/wp-json/"+n+"/add-template",method:"POST",data:JSON.stringify({id:m}),crossDomain:!1,contentType:"application/json",success:function(i){o.fadeOut("slow");let p=t("<a/>").attr("href","javascript:mm.product.edit_template(event, "+m+', "'+i.template_id+'")').html(i.template_id),l=t("<a/>").attr("href","javascript:mm.product.edit_template(event, "+m+', "'+i.template_id+'")').html(e.mm.config.msg.edit_pod_template);t("#post-"+m+" .pod_templ_editing > a").replaceWith(l),t("#post-"+m+" .column-pod_template_id").html(p),MM_POD_Editor.init({adminMode:!0,templateId:i.template_id,defaultContainer:e.mm.config.container,apiKey:e.mm.config.api,domain:e.mm.config.domain,successCallback:function(o){t.ajax({url:"/wp-json/"+n+"/set",method:"POST",data:jsonData(response),crossDomain:!1,contentType:"application/json",beforeSend:function(t){t.setRequestHeader("Authorization","Basic username:password")},success:function(t){e.mm.product.edit_template(m,t.id,container,api,domain)},error:function(t){a.log(t)}})},failCallback:function(t){alert("error happens")}})},error:function(t){o.fadeOut("slow"),a.log(t)}})}},e.mm.edit_template=function(t,e){t&&t.preventDefault(),MM_POD_Editor.init({adminMode:!0,templateId:e,defaultContainer:mm.config.container,apiKey:mm.config.api,domain:mm.config.domain,successCallback:function(t){},failCallback:function(t){alert("error happens")}})},e.mm.updatePost=function(t,e,o,i){t&&t.preventDefault(),jQuery.ajax({url:"/wp-json/"+n+"/set",method:"POST",data:JSON.stringify({id:e,template_id:o}),crossDomain:!1,contentType:"application/json",success:function(t){return i()},error:function(t){a.log(t)}})}}(jQuery,window,console)});